!function(){"use strict";var e="?";function t(t){var c=[],u=a(t,"stack");return u&&u.split("\n").forEach((function(t){var a=function(t){var o=n.exec(t);if(o){var i=o[2]&&0===o[2].indexOf("native"),s=o[2]&&0===o[2].indexOf("eval"),a=r.exec(o[2]);return s&&a&&(o[2]=a[1],o[3]=a[2],o[4]=a[3]),{args:i?[o[2]]:[],column:o[4]?+o[4]:void 0,func:o[1]||e,line:o[3]?+o[3]:void 0,url:i?void 0:o[2]}}}(t)||function(t){var n=o.exec(t);if(n)return{args:[],column:n[4]?+n[4]:void 0,func:n[1]||e,line:+n[3],url:n[2]}}(t)||function(t){var n=i.exec(t);if(n){var r=n[3]&&n[3].indexOf(" > eval")>-1,o=s.exec(n[3]);return r&&o&&(n[3]=o[1],n[4]=o[2],n[5]=void 0),{args:n[2]?n[2].split(","):[],column:n[5]?+n[5]:void 0,func:n[1]||e,line:n[4]?+n[4]:void 0,url:n[3]}}}(t);a&&(!a.func&&a.line&&(a.func=e),c.push(a))})),{message:a(t,"message"),name:a(t,"name"),stack:c}}var n=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,r=/\((\S*)(?::(\d+))(?::(\d+))\)/,o=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,i=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,s=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function a(e,t){if("object"==typeof e&&e&&t in e){var n=e[t];return"string"==typeof n?n:void 0}}function c(e,t,n){var r,o,i=!n||void 0===n.leading||n.leading,s=!n||void 0===n.trailing||n.trailing,a=!1;return{throttled:function(){for(var n=[],c=0;c<arguments.length;c++)n[c]=arguments[c];a?r=n:(i?e.apply(void 0,n):r=n,a=!0,o=setTimeout((function(){s&&r&&e.apply(void 0,r),a=!1,r=void 0}),t))},cancel:function(){clearTimeout(o),a=!1,r=void 0}}}function u(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach((function(t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})),e}function f(e){return e?(parseInt(e,10)^16*Math.random()>>parseInt(e,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,f)}function l(e){return 0!==e&&100*Math.random()<=e}function d(){}function p(e,t,n){if(null==e)return JSON.stringify(e);var r=[!1,void 0];v(e)&&(r=[!0,e.toJSON],delete e.toJSON);var o,i,s=[!1,void 0];"object"==typeof e&&v(o=Object.getPrototypeOf(e))&&(s=[!0,o.toJSON],delete o.toJSON);try{i=JSON.stringify(e,t,n)}catch(e){i="<error: unable to serialize object>"}finally{r[0]&&(e.toJSON=r[1]),s[0]&&(o.toJSON=s[1])}return i}function v(e){return"object"==typeof e&&null!==e&&Object.prototype.hasOwnProperty.call(e,"toJSON")}function h(e,t){return-1!==e.indexOf(t)}function g(e){return function(e){return"number"==typeof e}(e)&&e>=0&&e<=100}function b(e){return Object.keys(e).map((function(t){return e[t]}))}function m(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof e&&(e="object"==typeof self?self:"object"==typeof window?window:{}),e}function y(e,t,n){void 0===n&&(n="");var r=e.charCodeAt(t-1),o=r>=55296&&r<=56319?t+1:t;return e.length<=o?e:"".concat(e.slice(0,o)).concat(n)}function w(e,t,n,r){return k(e,[t],n,r)}function k(e,t,n,r){var o=void 0===r?{}:r,i=o.once,s=o.capture,a=o.passive,c=K(i?function(e){f(),n(e)}:n),u=a?{capture:s,passive:a}:s;t.forEach((function(t){return e.addEventListener(t,c,u)}));var f=function(){return t.forEach((function(t){return e.removeEventListener(t,c,u)}))};return{stop:f}}function x(e,t,n){if(void 0===n&&(n=function(){if("undefined"!=typeof WeakSet){var e=new WeakSet;return{hasAlreadyBeenSeen:function(t){var n=e.has(t);return n||e.add(t),n}}}var t=[];return{hasAlreadyBeenSeen:function(e){var n=t.indexOf(e)>=0;return n||t.push(e),n}}}()),void 0===t)return e;if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){var r=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,r)}if(!n.hasAlreadyBeenSeen(t)){if(Array.isArray(t)){for(var o=Array.isArray(e)?e:[],i=0;i<t.length;++i)o[i]=x(o[i],t[i],n);return o}var s,a="object"==(null===(s=e)?"null":Array.isArray(s)?"array":typeof s)?e:{};for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(a[c]=x(a[c],t[c],n));return a}}function S(e){return x(void 0,e)}function E(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0,o=t;r<o.length;r++){var i=o[r];null!=i&&(e=x(e,i))}return e}var O="agent",L="console",R="logger",C="network",T="source",M="report";function B(e){var t=_(e);return e.stack.forEach((function(e){var n="?"===e.func?"<anonymous>":e.func,r=e.args&&e.args.length>0?"(".concat(e.args.join(", "),")"):"",o=e.line?":".concat(e.line):"",i=e.line&&e.column?":".concat(e.column):"";t+="\n  at ".concat(n).concat(r," @ ").concat(e.url).concat(o).concat(i)})),t}function _(e){return"".concat(e.name||"Error",": ").concat(e.message)}function j(){var e,n=new Error;if(!n.stack)try{throw n}catch(e){}return Q((function(){var r=t(n);r.stack=r.stack.slice(2),e=B(r)})),e}var I=function(){function e(e){this.onFirstSubscribe=e,this.observers=[]}return e.prototype.subscribe=function(e){var t=this;return!this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe()||void 0),this.observers.push(e),{unsubscribe:function(){t.observers=t.observers.filter((function(t){return e!==t})),!t.observers.length&&t.onLastUnsubscribe&&t.onLastUnsubscribe()}}},e.prototype.notify=function(e){this.observers.forEach((function(t){return t(e)}))},e}();function A(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=new I((function(){var t=e.map((function(e){return e.subscribe((function(e){return n.notify(e)}))}));return function(){return t.forEach((function(e){return e.unsubscribe()}))}}));return n}var z={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},U={};function D(e,n,r){var o,i=e.map((function(e){return function(e){return"string"==typeof e?e:e instanceof Error?_(t(e)):p(e,void 0,2)}(e)})).join(" ");if(n===z.error){var s=function(e,t){for(var n=0;n<e.length;n+=1){var r=e[n];if(t(r))return r}}(e,(function(e){return e instanceof Error}));o=s?B(t(s)):void 0,i="console error: ".concat(i)}return{api:n,message:i,stack:o,handlingStack:r}}var P,N,q=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];Object.prototype.hasOwnProperty.call(z,e)||(e=z.log),q[e].apply(q,t)};function F(){return Date.now()}function H(){return performance.now()}function J(){return{relative:H(),timeStamp:F()}}function V(e,t){return t-e}function $(){return void 0===P&&(P=performance.timing.navigationStart),P}q.debug=console.debug.bind(console),q.log=console.log.bind(console),q.info=console.info.bind(console),q.warn=console.warn.bind(console),q.error=console.error.bind(console);var G,W={maxMessagesPerPage:0,sentMessageCount:0,telemetryEnabled:!1};function X(e,t,n){var r=n.value;n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=G?K(r):r;return n.apply(this,e)}}function K(e){return function(){return Q(e,this,arguments)}}function Q(e,t,n){try{return e.apply(t,n)}catch(e){ee(e);try{Y(e)}catch(e){ee(e)}}}function Y(e){!function(e){G&&W.sentMessageCount<W.maxMessagesPerPage&&(W.sentMessageCount+=1,G(e))}(u({status:"error"},function(e){if(e instanceof Error){var n=t(e);return{error:{kind:n.name,stack:B(n)},message:n.message}}return{error:{stack:"Not an instance of error"},message:"Uncaught ".concat(p(e))}}(e)))}function Z(e){W.debugMode=e}function ee(e){W.debugMode&&q.error("[INTERNAL ERROR]",e)}function te(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return e.apply(void 0,n)}catch(e){q.error(t,e)}}}function ne(){var e={};return{get:function(){return e},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},set:function(t){e=t}}}var re,oe,ie=function(){function e(){this.buffer=[]}return e.prototype.add=function(e){this.buffer.push(e)>500&&this.buffer.splice(0,1)},e.prototype.drain=function(){this.buffer.forEach((function(e){return e()})),this.buffer.length=0},e}();function se(){var e=m().DatadogEventBridge;if(e)return{getAllowedWebViewHosts:function(){return JSON.parse(e.getAllowedWebViewHosts())},send:function(t,n){e.send(JSON.stringify({eventType:t,event:n}))}}}function ae(e){var t;void 0===e&&(e=null===(t=m().location)||void 0===t?void 0:t.hostname);var n=se();return!!n&&n.getAllowedWebViewHosts().some((function(t){var n=t.replace(/\./g,"\\.");return new RegExp("^(.+\\.)*".concat(n,"$")).test(e)}))}function ce(e,t,n,r){var o=new Date;o.setTime(o.getTime()+n);var i="expires=".concat(o.toUTCString()),s=r&&r.crossSite?"none":"strict",a=r&&r.domain?";domain=".concat(r.domain):"",c=r&&r.secure?";secure":"";document.cookie="".concat(e,"=").concat(t,";").concat(i,";path=/;samesite=").concat(s).concat(a).concat(c)}function ue(e){return function(e,t){var n=new RegExp("(?:^|;)\\s*".concat(t,"\\s*=\\s*([^;]+)")).exec(e);return n?n[1]:void 0}(document.cookie,e)}function fe(e,t){ce(e,"",0,t)}function le(e){return function(e,t){if(function(){if(void 0!==oe)return oe;try{var e=new URL("http://test/path");return oe="http://test/path"===e.href}catch(e){oe=!1}return oe}())return void 0!==t?new URL(e,t):new URL(e);if(void 0===t&&!/:/.test(e))throw new Error("Invalid URL: '".concat(e,"'"));var n=document,r=n.createElement("a");if(void 0!==t){var o=(n=document.implementation.createHTMLDocument("")).createElement("base");o.href=t,n.head.appendChild(o),n.body.appendChild(r)}return r.href=e,r}(e,function(e){if(e.origin)return e.origin;var t=e.host.replace(/(:80|:443)$/,"");return"".concat(e.protocol,"//").concat(t)}(window.location)).href}var de={logs:"logs",rum:"rum",sessionReplay:"session-replay"},pe={logs:"logs",rum:"rum",sessionReplay:"replay"},ve="datadoghq.com";function he(e,t,n,r){var o=e.site,i=void 0===o?ve:o,s=e.clientToken,a=i.split("."),c=a.pop(),u="".concat(de[t],".browser-intake-").concat(a.join("-"),".").concat(c),l="https://".concat(u,"/api/v2/").concat(pe[t]),d=e.proxyUrl&&le(e.proxyUrl);return{build:function(){var e="ddsource=".concat(r||"browser")+"&ddtags=".concat(encodeURIComponent(["sdk_version:".concat("4.9.0")].concat(n).join(",")))+"&dd-api-key=".concat(s)+"&dd-evp-origin-version=".concat(encodeURIComponent("4.9.0"))+"&dd-evp-origin=browser"+"&dd-request-id=".concat(f());"rum"===t&&(e+="&batch_time=".concat(F()));var o="".concat(l,"?").concat(e);return d?"".concat(d,"?ddforward=").concat(encodeURIComponent(o)):o},buildIntakeUrl:function(){return d?"".concat(d,"?ddforward"):l}}}var ge=/[^a-z0-9_:./-]/;function be(e,t){var n=200-e.length-1;(t.length>n||ge.test(t))&&q.warn("".concat(e," value doesn't meet tag requirements and will be sanitized"));var r=t.replace(/,/g,"_");return"".concat(e,":").concat(r)}function me(e){var t,n;if(e&&e.clientToken)if(void 0===e.sampleRate||g(e.sampleRate)){var r;if(void 0===e.telemetrySampleRate||g(e.telemetrySampleRate))return r=e.enableExperimentalFeatures,Array.isArray(r)&&(N||(N=new Set(r)),r.filter((function(e){return"string"==typeof e})).forEach((function(e){N.add(e)}))),u({beforeSend:e.beforeSend&&te(e.beforeSend,"beforeSend threw an error:"),cookieOptions:ye(e),sampleRate:null!==(t=e.sampleRate)&&void 0!==t?t:100,telemetrySampleRate:null!==(n=e.telemetrySampleRate)&&void 0!==n?n:20,service:e.service,silentMultipleInit:!!e.silentMultipleInit,batchBytesLimit:16384,eventRateLimiterThreshold:3e3,maxInternalMonitoringMessagesPerPage:15,flushTimeout:3e4,maxBatchSize:50,maxMessageSize:262144},function(e){var t=function(e){var t=e.env,n=e.service,r=e.version,o=e.datacenter,i=[];return t&&i.push(be("env",t)),n&&i.push(be("service",n)),r&&i.push(be("version",r)),o&&i.push(be("datacenter",o)),i}(e),n=function(e,t){var n={logsEndpointBuilder:he(e,"logs",t),rumEndpointBuilder:he(e,"rum",t),sessionReplayEndpointBuilder:he(e,"sessionReplay",t)};return e.internalMonitoringApiKey?u(n,{internalMonitoringEndpointBuilder:he(u({},e,{clientToken:e.internalMonitoringApiKey}),"logs",t,"browser-agent-internal-monitoring")}):n}(e,t),r=b(n).map((function(e){return e.buildIntakeUrl()})),o=function(e,t,n){if(e.replica){var r=u({},e,{site:ve,clientToken:e.replica.clientToken}),o={logsEndpointBuilder:he(r,"logs",n),rumEndpointBuilder:he(r,"rum",n),internalMonitoringEndpointBuilder:he(r,"logs",n,"browser-agent-internal-monitoring")};return t.push.apply(t,b(o).map((function(e){return e.buildIntakeUrl()}))),u({applicationId:e.replica.applicationId},o)}}(e,r,t);return u({isIntakeUrl:function(e){return r.some((function(t){return 0===e.indexOf(t)}))},replica:o},n)}(e));q.error("Telemetry Sample Rate should be a number between 0 and 100")}else q.error("Sample Rate should be a number between 0 and 100");else q.error("Client Token is not configured, we will not send any data.")}function ye(e){var t={};return t.secure=function(e){return!!e.useSecureSessionCookie||!!e.useCrossSiteSessionCookie}(e),t.crossSite=!!e.useCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(t.domain=function(){if(void 0===re){for(var e="dd_site_test_".concat(f()),t=window.location.hostname.split("."),n=t.pop();t.length&&!ue(e);)ce(e,"test",1e3,{domain:n="".concat(t.pop(),".").concat(n)});fe(e,{domain:n}),re=n}return re}()),t}var we={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function ke(e,t,n,r,o){return n&&B({name:e,message:t,stack:[{func:"?",url:n,line:r,column:o}]})}function xe(e,t,n){return void 0===e?[]:"all"===e||Array.isArray(e)&&e.every((function(e){return h(t,e)}))?"all"===e?t:(r=e,o=new Set,r.forEach((function(e){return o.add(e)})),function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t}(o)):void q.error("".concat(n,' should be "all" or an array with allowed values "').concat(t.join('", "'),'"'));var r,o}var Se={debug:"debug",error:"error",info:"info",warn:"warn"},Ee="http",Oe=Object.keys(Se),Le=function(){function e(e,t,n,r,o){void 0===n&&(n=Ee),void 0===r&&(r=Se.debug),void 0===o&&(o={}),this.handleLogStrategy=e,this.handlerType=n,this.level=r,this.contextManager=ne(),this.contextManager.set(u({},o,t?{logger:{name:t}}:void 0))}return e.prototype.log=function(e,t,n){void 0===n&&(n=Se.info),this.handleLogStrategy({message:e,context:S(t),status:n},this)},e.prototype.debug=function(e,t){this.log(e,t,Se.debug)},e.prototype.info=function(e,t){this.log(e,t,Se.info)},e.prototype.warn=function(e,t){this.log(e,t,Se.warn)},e.prototype.error=function(e,t){var n={error:{origin:R}};this.log(e,E(n,t),Se.error)},e.prototype.setContext=function(e){this.contextManager.set(e)},e.prototype.getContext=function(){return this.contextManager.get()},e.prototype.addContext=function(e,t){this.contextManager.add(e,t)},e.prototype.removeContext=function(e){this.contextManager.remove(e)},e.prototype.setHandler=function(e){this.handlerType=e},e.prototype.getHandler=function(){return this.handlerType},e.prototype.setLevel=function(e){this.level=e},e.prototype.getLevel=function(){return this.level},function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);i>3&&s&&Object.defineProperty(t,n,s)}([X],e.prototype,"log",null),e}(),Re=/[^\u0000-\u007F]/,Ce=function(){function e(e,t,n,r,o,i){void 0===i&&(i=d),this.request=e,this.maxSize=t,this.bytesLimit=n,this.maxMessageSize=r,this.flushTimeout=o,this.beforeUnloadCallback=i,this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesSize=0,this.bufferMessageCount=0,this.flushOnVisibilityHidden(),this.flushPeriodically()}return e.prototype.add=function(e){this.addOrUpdate(e)},e.prototype.upsert=function(e,t){this.addOrUpdate(e,t)},e.prototype.flush=function(){if(0!==this.bufferMessageCount){var e=this.pushOnlyBuffer.concat(b(this.upsertBuffer));this.request.send(e.join("\n"),this.bufferBytesSize),this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesSize=0,this.bufferMessageCount=0}},e.prototype.sizeInBytes=function(e){return Re.test(e)?void 0!==window.TextEncoder?(new TextEncoder).encode(e).length:new Blob([e]).size:e.length},e.prototype.addOrUpdate=function(e,t){var n=this.process(e),r=n.processedMessage,o=n.messageBytesSize;o>=this.maxMessageSize?q.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(this.maxMessageSize,"KB.")):(this.hasMessageFor(t)&&this.remove(t),this.willReachedBytesLimitWith(o)&&this.flush(),this.push(r,o,t),this.isFull()&&this.flush())},e.prototype.process=function(e){var t=p(e);return{processedMessage:t,messageBytesSize:this.sizeInBytes(t)}},e.prototype.push=function(e,t,n){this.bufferMessageCount>0&&(this.bufferBytesSize+=1),void 0!==n?this.upsertBuffer[n]=e:this.pushOnlyBuffer.push(e),this.bufferBytesSize+=t,this.bufferMessageCount+=1},e.prototype.remove=function(e){var t=this.upsertBuffer[e];delete this.upsertBuffer[e];var n=this.sizeInBytes(t);this.bufferBytesSize-=n,this.bufferMessageCount-=1,this.bufferMessageCount>0&&(this.bufferBytesSize-=1)},e.prototype.hasMessageFor=function(e){return void 0!==e&&void 0!==this.upsertBuffer[e]},e.prototype.willReachedBytesLimitWith=function(e){return this.bufferBytesSize+e+1>=this.bytesLimit},e.prototype.isFull=function(){return this.bufferMessageCount===this.maxSize||this.bufferBytesSize>=this.bytesLimit},e.prototype.flushPeriodically=function(){var e=this;setTimeout(K((function(){e.flush(),e.flushPeriodically()})),this.flushTimeout)},e.prototype.flushOnVisibilityHidden=function(){var e=this;navigator.sendBeacon&&(w(window,"beforeunload",this.beforeUnloadCallback),w(document,"visibilitychange",(function(){"hidden"===document.visibilityState&&e.flush()})),w(window,"beforeunload",(function(){return e.flush()})))},e}(),Te=function(){function e(e,t){this.endpointBuilder=e,this.bytesLimit=t}return e.prototype.send=function(e,t){var n=this.endpointBuilder.build();if(navigator.sendBeacon&&t<this.bytesLimit)try{if(navigator.sendBeacon(n,e))return}catch(e){!function(e){Me||(Me=!0,Y(e))}(e)}var r=new XMLHttpRequest;r.open("POST",n,!0),r.send(e)},e}(),Me=!1;function Be(e,t,n){var r,o=i(t);function i(t){return new Ce(new Te(t,e.batchBytesLimit),e.maxBatchSize,e.batchBytesLimit,e.maxMessageSize,e.flushTimeout)}return n&&(r=i(n)),{add:function(e){o.add(e),r&&r.add(e)}}}var _e=1/0,je=function(){function e(e){var t=this;this.expireDelay=e,this.entries=[],this.clearOldContextsInterval=setInterval((function(){return t.clearOldContexts()}),6e4)}return e.prototype.add=function(e,t){var n=this,r={context:e,startTime:t,endTime:_e,remove:function(){var e=n.entries.indexOf(r);e>=0&&n.entries.splice(e,1)},close:function(e){r.endTime=e}};return this.entries.unshift(r),r},e.prototype.find=function(e){void 0===e&&(e=_e);for(var t=0,n=this.entries;t<n.length;t++){var r=n[t];if(r.startTime<=e){if(e<=r.endTime)return r.context;break}}},e.prototype.closeActive=function(e){var t=this.entries[0];t&&t.endTime===_e&&t.close(e)},e.prototype.findAll=function(e){return void 0===e&&(e=_e),this.entries.filter((function(t){return t.startTime<=e&&e<=t.endTime})).map((function(e){return e.context}))},e.prototype.reset=function(){this.entries=[]},e.prototype.stop=function(){clearInterval(this.clearOldContextsInterval)},e.prototype.clearOldContexts=function(){for(var e=H()-this.expireDelay;this.entries.length>0&&this.entries[this.entries.length-1].endTime<e;)this.entries.pop()},e}(),Ie=9e5;var Ae,ze=/^([a-z]+)=([a-z0-9-]+)$/,Ue="_dd_s",De=[];function Pe(e,t){var n;if(void 0===t&&(t=0),Ae||(Ae=e),e===Ae)if(t>=100)Fe();else{var r,o=Ve();if(Ne()){if(o.lock)return void qe(e,t);if(r=f(),o.lock=r,Je(o,e.options),(o=Ve()).lock!==r)return void qe(e,t)}var i=e.process(o);if(Ne()&&(o=Ve()).lock!==r)qe(e,t);else{if(i&&He(i,e.options),Ne()&&(!i||!$e(i))){if((o=Ve()).lock!==r)return void qe(e,t);delete o.lock,Je(o,e.options),i=o}null===(n=e.after)||void 0===n||n.call(e,i||o),Fe()}}else De.push(e)}function Ne(){return!!window.chrome||/HeadlessChrome/.test(window.navigator.userAgent)}function qe(e,t){setTimeout(K((function(){Pe(e,t+1)})),10)}function Fe(){Ae=void 0;var e=De.shift();e&&Pe(e)}function He(e,t){$e(e)?function(e){ce(Ue,"",0,e)}(t):(e.expire=String(Date.now()+Ie),Je(e,t))}function Je(e,t){ce(Ue,function(e){return(t=e,Object.keys(t).map((function(e){return[e,t[e]]}))).map((function(e){var t=e[0],n=e[1];return"".concat(t,"=").concat(n)})).join("&");var t}(e),Ie,t)}function Ve(){var e=ue(Ue),t={};return function(e){return void 0!==e&&(-1!==e.indexOf("&")||ze.test(e))}(e)&&e.split("&").forEach((function(e){var n=ze.exec(e);if(null!==n){var r=n[1],o=n[2];t[r]=o}})),t}function $e(e){return t=e,0===Object.keys(t).length;var t}var Ge,We=[];function Xe(e,t,n){!function(e){var t=ue(Ue),n=ue("_dd"),r=ue("_dd_r"),o=ue("_dd_l");if(!t){var i={};n&&(i.id=n),o&&/^[01]$/.test(o)&&(i.logs=o),r&&/^[012]$/.test(r)&&(i.rum=r),He(i,e)}}(e);var r=function(e,t,n){var r=new I,o=new I,i=setInterval(K((function(){Pe({options:e,process:function(e){return l(e)?void 0:{}},after:a})})),1e3),s=function(){var e=Ve();return l(e)?e:{}}();function a(e){return l(e)||(e={}),u()&&(function(e){return s.id!==e.id||s[t]!==e[t]}(e)?(s={},o.notify()):s=e),e}function u(){return void 0!==s[t]}function l(e){return(void 0===e.created||Date.now()-Number(e.created)<144e5)&&(void 0===e.expire||Date.now()<Number(e.expire))}return{expandOrRenewSession:c(K((function(){var o;Pe({options:e,process:function(e){var r=a(e);return o=function(e){var r=n(e[t]),o=r.trackingType,i=r.isTracked;return e[t]=o,i&&!e.id&&(e.id=f(),e.created=String(Date.now())),i}(r),r},after:function(e){o&&!u()&&function(e){s=e,r.notify()}(e),s=e}})})),1e3).throttled,expandSession:function(){Pe({options:e,process:function(e){return u()?a(e):void 0}})},getSession:function(){return s},renewObservable:r,expireObservable:o,stop:function(){clearInterval(i)}}}(e,t,n);We.push((function(){return r.stop()}));var o,i=new je(144e5);function s(){return{id:r.getSession().id,trackingType:r.getSession()[t]}}return We.push((function(){return i.stop()})),r.renewObservable.subscribe((function(){i.add(s(),H())})),r.expireObservable.subscribe((function(){i.closeActive(H())})),r.expandOrRenewSession(),i.add(s(),[0,$()][0]),o=k(window,["click","touchstart","keydown","scroll"],(function(){return r.expandOrRenewSession()}),{capture:!0,passive:!0}).stop,We.push(o),function(e){var t=K((function(){"visible"===document.visibilityState&&e()})),n=w(document,"visibilitychange",t).stop;We.push(n);var r=setInterval(t,6e4);We.push((function(){clearInterval(r)}))}((function(){return r.expandSession()})),{findActiveSession:function(e){return i.find(e)},renewObservable:r.renewObservable,expireObservable:r.expireObservable}}function Ke(e){return l(e.sampleRate)?"1":"0"}var Qe,Ye=((Ge={})[Se.debug]=0,Ge[Se.info]=1,Ge[Se.warn]=2,Ge[Se.error]=3,Ge);function Ze(e,t,n){var r=n.getHandler(),o=Array.isArray(r)?r:[r];return Ye[e]>=Ye[n.getLevel()]&&h(o,t)}function et(e){var t=window.DD_RUM;return t&&t.getInternalContext?t.getInternalContext(e):void 0}var tt,nt,rt=((Qe={})[z.log]=Se.info,Qe[z.debug]=Se.debug,Qe[z.info]=Se.info,Qe[z.warn]=Se.warn,Qe[z.error]=Se.error,Qe),ot=((tt={})[we.cspViolation]=Se.error,tt[we.intervention]=Se.error,tt[we.deprecation]=Se.warn,tt);function it(e,t,n){var r=e[t],o=n(r),i=function(){return o.apply(this,arguments)};return e[t]=i,{stop:function(){e[t]===i?e[t]=r:o=r}}}function st(e,t,n){var r=n.before,o=n.after;return it(e,t,(function(e){return function(){var t,n=arguments;return r&&Q(r,this,n),"function"==typeof e&&(t=e.apply(this,n)),o&&Q(o,this,n),t}}))}var at,ct=new WeakMap;function ut(){var e;return nt||(e=new I((function(){var t=st(XMLHttpRequest.prototype,"open",{before:ft}).stop,n=st(XMLHttpRequest.prototype,"send",{before:function(){lt.call(this,e)}}).stop,r=st(XMLHttpRequest.prototype,"abort",{before:dt}).stop;return function(){t(),n(),r()}})),nt=e),nt}function ft(e,t){ct.set(this,{state:"open",method:e,url:le(t.toString())})}function lt(e){var t=this,n=ct.get(this);if(n){var r=n;r.state="start",r.startTime=H(),r.startClocks=J(),r.isAborted=!1,r.xhr=this;var o=!1,i=st(this,"onreadystatechange",{before:function(){this.readyState===XMLHttpRequest.DONE&&s()}}).stop,s=K((function(){if(t.removeEventListener("loadend",s),i(),!o){o=!0;var a=n;a.state="complete",a.duration=V(r.startClocks.timeStamp,F()),a.status=t.status,e.notify(u({},a))}}));this.addEventListener("loadend",s),e.notify(r)}}function dt(){var e=ct.get(this);e&&(e.isAborted=!0)}function pt(e,t,n){var r=n&&n.method||"object"==typeof t&&t.method||"GET",o=le("object"==typeof t&&t.url||t),i={state:"start",init:n,input:t,method:r,startClocks:J(),url:o};return e.notify(i),i}function vt(e,t,n){var r=function(t){var r=n;r.state="complete",r.duration=V(r.startClocks.timeStamp,F()),"stack"in t||t instanceof Error?(r.status=0,r.isAborted=t instanceof DOMException&&t.code===DOMException.ABORT_ERR,r.error=t,e.notify(r)):"status"in t&&(r.response=t,r.responseType=t.type,r.status=t.status,r.isAborted=!1,e.notify(r))};t.then(K(r),K(r))}function ht(e,n){var r=ut().subscribe((function(e){"complete"===e.state&&i("xhr",e)})),o=function(){var e;return at||(e=new I((function(){if(window.fetch)return it(window,"fetch",(function(t){return function(n,r){var o,i=Q(pt,null,[e,n,r]);return i?(o=t.call(this,i.input,i.init),Q(vt,null,[e,o,i])):o=t.call(this,n,r),o}})).stop})),at=e),at}().subscribe((function(e){"complete"===e.state&&i("fetch",e)}));function i(r,o){function i(e){n.notify(0,{rawLogsEvent:{message:"".concat(bt(r)," error ").concat(o.method," ").concat(o.url),date:o.startClocks.timeStamp,error:{origin:C,stack:e||"Failed to load"},http:{method:o.method,status_code:o.status,url:o.url},status:Se.error,origin:C}})}e.isIntakeUrl(o.url)||!function(e){return 0===e.status&&"opaque"!==e.responseType}(o)&&!function(e){return e.status>=500}(o)||("xhr"in o?function(e,t,n){"string"==typeof e.response?n(gt(e.response,t)):n(e.response)}(o.xhr,e,i):o.response?function(e,t,n){window.TextDecoder?e.body?function(e,t,n){!function(e,t,n){var r=e.getReader(),o=[],i=0;function s(){var e;if(r.cancel().catch(d),1===o.length)e=o[0];else{e=new Uint8Array(i);var s=0;o.forEach((function(t){e.set(t,s),s+=t.length}))}n(void 0,e.slice(0,t),e.length>t)}!function e(){r.read().then(K((function(n){n.done?s():(o.push(n.value),(i+=n.value.length)>t?s():e())})),K((function(e){return n(e)})))}()}(e,t,(function(e,t,r){if(e)n(e);else{var o=(new TextDecoder).decode(t);r&&(o+="..."),n(void 0,o)}}))}(e.clone().body,t.requestErrorResponseLengthLimit,(function(e,t){n(e?"Unable to retrieve response: ".concat(e):t)})):n():e.clone().text().then(K((function(e){return n(gt(e,t))})),K((function(e){return n("Unable to retrieve response: ".concat(e))})))}(o.response,e,i):o.error&&function(e,n,r){r(gt(B(t(e)),n))}(o.error,e,i))}return{stop:function(){r.unsubscribe(),o.unsubscribe()}}}function gt(e,t){return e.length>t.requestErrorResponseLengthLimit?"".concat(e.substring(0,t.requestErrorResponseLengthLimit),"..."):e}function bt(e){return"xhr"===e?"XHR":"Fetch"}var mt=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function yt(e){return function(e){var n=function(e){return st(window,"onerror",{before:function(n,r,o,i,s){var a;if(s)a=t(s),e(a,s);else{var c,u={url:r,column:i,line:o},f=n;if("[object String]"==={}.toString.call(n)){var l=mt.exec(f);l&&(c=l[1],f=l[2])}e(a={name:c,message:"string"==typeof f?f:void 0,stack:[u]},n)}}})}(e).stop,r=function(e){return st(window,"onunhandledrejection",{before:function(n){var r=n.reason||"Empty reason",o=t(r);e(o,r)}})}(e).stop;return{stop:function(){n(),r()}}}((function(t,n){var r=function(e,t,n,r){return e&&(void 0!==e.message||t instanceof Error)?{message:e.message||"Empty message",stack:B(e),handlingStack:r,type:e.name}:{message:"".concat("Uncaught"," ").concat(p(t)),stack:"No stack, consider using an instance of Error",handlingStack:r,type:e&&e.name}}(t,n),o=r.stack,i=r.message,s=r.type;e.notify({message:i,stack:o,type:s,source:T,startClocks:J(),originalError:n,handling:"unhandled"})}))}var wt,kt,xt,St=function(){function e(){this.callbacks={}}return e.prototype.notify=function(e,t){var n=this.callbacks[e];n&&n.forEach((function(e){return e(t)}))},e.prototype.subscribe=function(e,t){var n=this;return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),{unsubscribe:function(){n.callbacks[e]=n.callbacks[e].filter((function(e){return t!==e}))}}},e}();kt=function(e){var t,n,r=!1,o=ne(),i={},s=new ie,a=function(e,t,n,r){void 0===n&&(n=S(l())),void 0===r&&(r=F()),s.add((function(){return a(e,t,n,r)}))},c=function(){},f=new Le((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.apply(void 0,e)}));function l(){return{view:{referrer:document.referrer,url:window.location.href},context:o.get()}}return t={logger:f,init:K((function(t){if(ae()&&(t=function(e){return u({},e,{clientToken:"empty"})}(t)),function(e){return!r||(e.silentMultipleInit||q.error("DD_LOGS is already initialized."),!1)}(t)){var n=function(e){var t=me(e),n=xe(e.forwardConsoleLogs,b(z),"Forward Console Logs"),r=xe(e.forwardReports,b(we),"Forward Reports");if(t&&n&&r)return e.forwardErrorsToLogs&&!h(n,z.error)&&n.push(z.error),u({forwardErrorsToLogs:!1!==e.forwardErrorsToLogs,forwardConsoleLogs:n,forwardReports:r,requestErrorResponseLengthLimit:32768},t)}(t);n&&(a=e(n,l,f).handleLog,c=function(){return S(t)},s.drain(),r=!0)}})),getLoggerGlobalContext:K(o.get),setLoggerGlobalContext:K(o.set),addLoggerGlobalContext:K(o.add),removeLoggerGlobalContext:K(o.remove),createLogger:K((function(e,t){return void 0===t&&(t={}),i[e]=new Le((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.apply(void 0,e)}),e,t.handler,t.level,t.context),i[e]})),getLogger:K((function(e){return i[e]})),getInitConfiguration:K((function(){return c()}))},n=u({version:"4.9.0",onReady:function(e){e()}},t),Object.defineProperty(n,"_setDebug",{get:function(){return Z},enumerable:!1}),n}((function(e,t,n){var r=new St,o=function(e){var t,n,r=function(e){var t,n,r=new I,o=new I;return W.telemetryEnabled=l(e.telemetrySampleRate),G=function(e){r.notify(function(e){return E({date:F()},void 0!==t?t():{},e)}(e)),N&&N.has("telemetry")&&W.telemetryEnabled&&o.notify(function(e){return E({type:"telemetry",date:F(),service:"browser-sdk",version:"4.9.0",source:"browser",_dd:{format_version:2},telemetry:e},void 0!==n?n():{})}(e))},u(W,{maxMessagesPerPage:e.maxInternalMonitoringMessagesPerPage,sentMessageCount:0}),{setExternalContextProvider:function(e){t=e},monitoringMessageObservable:r,setTelemetryContextProvider:function(e){n=e},telemetryEventObservable:o}}(e);if(ae()){var o=se();r.monitoringMessageObservable.subscribe((function(e){return o.send("internal_log",e)})),r.telemetryEventObservable.subscribe((function(e){return o.send("internal_telemetry",e)}))}else{if(e.internalMonitoringEndpointBuilder){var i=Be(e,e.internalMonitoringEndpointBuilder,null===(t=e.replica)||void 0===t?void 0:t.internalMonitoringEndpointBuilder);r.monitoringMessageObservable.subscribe((function(e){return i.add(e)}))}var s=Be(e,e.rumEndpointBuilder,null===(n=e.replica)||void 0===n?void 0:n.rumEndpointBuilder);r.telemetryEventObservable.subscribe((function(e){return s.add(e)}))}return r}(e);o.setExternalContextProvider((function(){var e;return E({session_id:null===(e=s.findTrackedSession())||void 0===e?void 0:e.id},et(),{view:{name:null,url:null,referrer:null}})})),o.setTelemetryContextProvider((function(){var e,t,n,r,o,i;return{application:{id:null===(e=et())||void 0===e?void 0:e.application_id},session:{id:null===(t=s.findTrackedSession())||void 0===t?void 0:t.id},view:{id:null===(r=null===(n=et())||void 0===n?void 0:n.view)||void 0===r?void 0:r.id},action:{id:null===(i=null===(o=et())||void 0===o?void 0:o.user_action)||void 0===i?void 0:i.id}}})),ht(e,r),function(e,t,n){void 0===n&&(n=new I),e.forwardErrorsToLogs&&yt(n);n.subscribe((function(e){t.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,error:{kind:e.type,origin:T,stack:e.stack},origin:T,status:Se.error}})}))}(e,r),function(e,t){(function(e){var t=e.map((function(e){return U[e]||(U[e]=function(e){var t=new I((function(){var n=console[e];return console[e]=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];n.apply(console,r);var i=j();Q((function(){t.notify(D(r,e,i))}))},function(){console[e]=n}}));return t}(e)),U[e]}));return A.apply(void 0,t)})(e.forwardConsoleLogs).subscribe((function(e){t.notify(0,{rawLogsEvent:{date:F(),message:e.message,origin:L,error:e.api===z.error?{origin:L,stack:e.stack}:void 0,status:rt[e.api]}})}))}(e,r),function(e,t){(function(e){var t,n=[];h(e,we.cspViolation)&&n.push(t=new I((function(){var e=K((function(e){t.notify(function(e){var t=we.cspViolation,n="'".concat(e.blockedURI,"' blocked by '").concat(e.effectiveDirective,"' directive");return{type:we.cspViolation,subtype:e.effectiveDirective,message:"".concat(t,": ").concat(n),stack:ke(e.effectiveDirective,"".concat(n,' of the policy "').concat(y(e.originalPolicy,100,"..."),'"'),e.sourceFile,e.lineNumber,e.columnNumber)}}(e))}));return w(document,"securitypolicyviolation",e).stop})));var r=e.filter((function(e){return e!==we.cspViolation}));return r.length&&n.push(function(e){var t=new I((function(){if(window.ReportingObserver){var n=K((function(e){return e.forEach((function(e){t.notify(function(e){var t=e.type,n=e.body;return{type:t,subtype:n.id,message:"".concat(t,": ").concat(n.message),stack:ke(n.id,n.message,n.sourceFile,n.lineNumber,n.columnNumber)}}(e))}))})),r=new window.ReportingObserver(n,{types:e,buffered:!0});return r.observe(),function(){r.disconnect()}}}));return t}(r)),A.apply(void 0,n)})(e.forwardReports).subscribe((function(e){var n,r=e.message,o=ot[e.type];o===Se.error?n={kind:e.subtype,origin:M,stack:e.stack}:e.stack&&(r+=" Found in ".concat(function(e){var t;return null===(t=/@ (.+)/.exec(e))||void 0===t?void 0:t[1]}(e.stack))),t.notify(0,{rawLogsEvent:{date:F(),message:r,origin:M,error:n,status:o}})}))}(e,r);var i=function(e){return{handleLog:function(t,n,r,o){var i=t.context;Ze(t.status,"console",n)&&q(t.status,t.message,E(n.getContext(),i)),e.notify(0,{rawLogsEvent:{date:o||F(),message:t.message,status:t.status,origin:R},messageContext:i,savedCommonContext:r,logger:n})}}}(r).handleLog,s=function(e){if(void 0===document.cookie||null===document.cookie)return!1;try{var t="dd_cookie_test_".concat(f()),n="test";ce(t,n,1e3,e);var r=ue(t)===n;return fe(t,e),r}catch(e){return q.error(e),!1}}(e.cookieOptions)&&!ae()?function(e){var t=Xe(e.cookieOptions,"logs",(function(t){return function(e,t){var n=function(e){return"0"===e||"1"===e}(t)?t:Ke(e);return{trackingType:n,isTracked:"1"===n}}(e,t)}));return{findTrackedSession:function(e){var n=t.findActiveSession(e);return n&&"1"===n.trackingType?{id:n.id}:void 0}}}(e):function(e){var t="1"===Ke(e)?{}:void 0;return{findTrackedSession:function(){return t}}}(e);return function(e,t,n,r,o){var i=Oe.concat(["custom"]),s={};i.forEach((function(e){var r,o,i,a,c;s[e]=(r=e,o=t.eventRateLimiterThreshold,i=function(e){return function(e,t){t.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,error:{origin:O},origin:O,status:Se.error}})}(e,n)},a=0,c=!1,{isLimitReached:function(){if(0===a&&setTimeout((function(){a=0}),6e4),(a+=1)<=o||c)return c=!1,!1;if(a===o+1){c=!0;try{i({message:"Reached max number of ".concat(r,"s by minute: ").concat(o),source:O,startClocks:J()})}finally{c=!1}}return!0}})})),n.subscribe(0,(function(i){var a,c,u,f=i.rawLogsEvent,l=i.messageContext,d=void 0===l?void 0:l,p=i.savedCommonContext,v=void 0===p?void 0:p,h=i.logger,g=void 0===h?o:h,b=f.date-$(),m=e.findTrackedSession(b);if(m){var y=v||r(),w=E({service:t.service,session_id:m.id,view:y.view},y.context,et(b),f,g.getContext(),d);!Ze(f.status,Ee,g)||!1===(null===(a=t.beforeSend)||void 0===a?void 0:a.call(t,w))||(null===(c=w.error)||void 0===c?void 0:c.origin)!==O&&(null!==(u=s[w.status])&&void 0!==u?u:s.custom).isLimitReached()||n.notify(1,w)}}))}(s,e,r,t,n),ae()?function(e){var t=se();e.subscribe(1,(function(e){t.send("log",e)}))}(r):function(e,t){var n,r=Be(e,e.logsEndpointBuilder,null===(n=e.replica)||void 0===n?void 0:n.logsEndpointBuilder);t.subscribe(1,(function(e){r.add(e)}))}(e,r),{handleLog:i}})),xt=(wt=m())["DD_LOGS"],wt.DD_LOGS=kt,xt&&xt.q&&xt.q.forEach((function(e){return te(e,"onReady callback threw an error:")()}))}();